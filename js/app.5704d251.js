(function(){"use strict";var e={2529:function(e,t,i){var l=i(9242),o=i(8716),a=(i(4415),i(3396));function n(e,t,i,l,o,n){const d=(0,a.up)("print-page");return(0,a.wg)(),(0,a.j4)(d)}var d=i(7139);const m=e=>((0,a.dD)("data-v-4e3062a4"),e=e(),(0,a.Cn)(),e),r={class:"print-container"},s=m((()=>(0,a._)("iframe",{id:"print-iframe"},null,-1))),u={class:"print-box"},h={style:{color:"red","margin-bottom":"10px","text-align":"center","font-weight":"bold"}},p={style:{"text-align":"center","margin-bottom":"10px"}},g=(0,a.Uk)("保存"),f=(0,a.Uk)("打印"),c=(0,a.Uk)("初始化"),b={class:"print-box"};function w(e,t,i,l,o,n){const m=(0,a.up)("item-select"),w=(0,a.up)("print-main"),y=(0,a.up)("el-scrollbar"),v=(0,a.up)("info-extract"),W=(0,a.up)("el-tab-pane"),F=(0,a.up)("el-input"),C=(0,a.up)("el-form-item"),k=(0,a.up)("el-option"),x=(0,a.up)("el-select"),I=(0,a.up)("el-button"),S=(0,a.up)("el-form"),V=(0,a.up)("item-info"),_=(0,a.up)("el-tabs"),T=(0,a.up)("el-table-column"),U=(0,a.up)("el-table"),$=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(m,{disabled:o.loading,items:o.items,"onUpdate:items":t[0]||(t[0]=e=>o.items=e)},null,8,["disabled","items"]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(y,{class:"print-el-scrollbar","wrap-class":"default-el-scrollbar-wrap",tabindex:"-1"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{ref:"print-main","globe-form":o.globeForm,"onUpdate:globe-form":t[1]||(t[1]=e=>o.globeForm=e),items:o.items,"onUpdate:items":t[2]||(t[2]=e=>o.items=e),onSetCurrentRow:n.setCurrentRow,onSetCodeLength:n.setCodeLength},null,8,["globe-form","items","onSetCurrentRow","onSetCodeLength"]),s])),_:1})),[[$,o.loading]]),(0,a.Wm)(y,{class:"print-right","wrap-class":"default-el-scrollbar-wrap"},{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a.Wm)(_,{modelValue:o.rightTabs,"onUpdate:modelValue":t[15]||(t[15]=e=>o.rightTabs=e),type:"card"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{disabled:o.loading,label:"信息提取",name:"extract",style:{"padding-top":"15px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{"code-form":o.codeForm,"onUpdate:code-form":t[3]||(t[3]=e=>o.codeForm=e),onHandleQuery:n.handleQuery},null,8,["code-form","onHandleQuery"]),(0,a._)("div",h,"提取到个数："+(0,d.zw)(o.codeLength),1)])),_:1},8,["disabled"]),(0,a.Wm)(W,{disabled:o.loading,label:"全局设置",name:"globe",style:{"padding-top":"15px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{inline:"","label-width":"120px",disabled:o.loading},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{label:"纸张高度(mm)"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:o.globeForm.pageHeight,"onUpdate:modelValue":t[4]||(t[4]=e=>o.globeForm.pageHeight=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(C,{label:"纸张宽度(mm)"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:o.globeForm.pageWidth,"onUpdate:modelValue":t[5]||(t[5]=e=>o.globeForm.pageWidth=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(C,{label:"纸张上边距(mm)"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:o.globeForm.pagePaddingTop,"onUpdate:modelValue":t[6]||(t[6]=e=>o.globeForm.pagePaddingTop=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(C,{label:"纸张左边距(mm)"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:o.globeForm.pagePaddingLeft,"onUpdate:modelValue":t[7]||(t[7]=e=>o.globeForm.pagePaddingLeft=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(C,{label:"行数"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:o.globeForm.rows,"onUpdate:modelValue":t[8]||(t[8]=e=>o.globeForm.rows=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(C,{label:"列数"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:o.globeForm.columns,"onUpdate:modelValue":t[9]||(t[9]=e=>o.globeForm.columns=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(C,{label:"卡片高度(mm)"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:o.globeForm.height,"onUpdate:modelValue":t[10]||(t[10]=e=>o.globeForm.height=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(C,{label:"卡片宽度(mm)"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:o.globeForm.width,"onUpdate:modelValue":t[11]||(t[11]=e=>o.globeForm.width=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(C,{label:"卡片上间距(mm)"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:o.globeForm.marginTop,"onUpdate:modelValue":t[12]||(t[12]=e=>o.globeForm.marginTop=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(C,{label:"卡片左间距(mm)"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{modelValue:o.globeForm.marginLeft,"onUpdate:modelValue":t[13]||(t[13]=e=>o.globeForm.marginLeft=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(C,{label:"边框宽度"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{modelValue:o.globeForm.borderWidth,"onUpdate:modelValue":t[14]||(t[14]=e=>o.globeForm.borderWidth=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.borderWidth,(e=>((0,a.wg)(),(0,a.j4)(k,{key:"borderWidth"+e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a._)("div",p,[(0,a.Wm)(I,{type:"primary",onClick:n.submitForm},{default:(0,a.w5)((()=>[g])),_:1},8,["onClick"]),(0,a.Wm)(I,{type:"info",onClick:n.handlePrint},{default:(0,a.w5)((()=>[f])),_:1},8,["onClick"]),(0,a.Wm)(I,{type:"danger",onClick:n.resetForm},{default:(0,a.w5)((()=>[c])),_:1},8,["onClick"])])])),_:1},8,["disabled"])])),_:1},8,["disabled"]),(0,a.Wm)(W,{disabled:o.loading||null==o.currentIndex,label:"组件设置",name:"component",style:{"padding-top":"15px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{ref:"item-info",items:o.items,"current-index":o.currentIndex,onGetImgRef:n.getImgRef,onRemoveItem:n.removeItem,onSubmitForm:n.submitItemForm},null,8,["items","current-index","onGetImgRef","onRemoveItem","onSubmitForm"])])),_:1},8,["disabled"])])),_:1},8,["modelValue"])]),(0,a._)("div",b,[(0,a.Wm)(_,{"model-value":"items",type:"card"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{label:"组件列表",name:"items"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{ref:"items-table",data:o.items,"highlight-current-row":"",onCurrentChange:n.handleCurrentChange},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{label:"组件名称",prop:"name",align:"center"}),(0,a.Wm)(T,{label:"组件类型",prop:"type",align:"center",formatter:n.dealType},null,8,["formatter"])])),_:1},8,["data","onCurrentChange"])])),_:1})])),_:1})])])),_:1})])}const y={style:{"text-align":"center","margin-bottom":"10px"}},v=(0,a.Uk)("提 取");function W(e,t,i,o,n,d){const m=(0,a.up)("el-input"),r=(0,a.up)("el-form-item"),s=(0,a.up)("el-button"),u=(0,a.up)("el-form");return(0,a.wg)(),(0,a.j4)(u,{inline:"","label-width":"120px",disabled:n.loading},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"起始编号"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{ref:"start-code",modelValue:d.pageCodeForm.startCode,"onUpdate:modelValue":t[0]||(t[0]=e=>d.pageCodeForm.startCode=e),onKeyup:(0,l.D2)(d.handleKeyUpStartCode,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),(0,a.Wm)(r,{label:"终止编号"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{ref:"end-code",modelValue:d.pageCodeForm.endCode,"onUpdate:modelValue":t[1]||(t[1]=e=>d.pageCodeForm.endCode=e),onKeyup:(0,l.D2)(d.handleKeyUpEndCode,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),(0,a._)("div",y,[(0,a.Wm)(s,{type:"primary",disabled:n.loading,onClick:d.handleKeyUpEndCode},{default:(0,a.w5)((()=>[v])),_:1},8,["disabled","onClick"])])])),_:1},8,["disabled"])}var F={props:{codeForm:{type:Object,default:null}},data(){return{loading:!1}},computed:{pageCodeForm:{get(){return this.codeForm},set(e){this.$emit("update:codeForm",e)}}},mounted(){this.handleQuery()},methods:{handleKeyUpStartCode(){this.$nextTick((()=>{this.$refs["end-code"].focus()}))},handleKeyUpEndCode(){if(this.loading=!0,this.pageCodeForm.startCode){{const e=this.pageCodeForm.startCode+"";if(e.trim().length<1)return void this.$alert("起始编号不能为空","警告",{confirmButtonText:"确定",callback:()=>{this.loading=!1}});this.pageCodeForm.startCode=e}if(this.pageCodeForm.endCode){{const e=this.pageCodeForm.endCode+"";if(e.trim().length<1)return void this.$alert("终止编号不能为空","警告",{confirmButtonText:"确定",callback:()=>{this.loading=!1,this.$nextTick((()=>{this.$refs["end-code"].focus()}))}});this.pageCodeForm.endCode=e}this.pageCodeForm.startCode.length===this.pageCodeForm.endCode.length?this.$emit("handleQueryReader",this.pageCodeForm.startCode,this.pageCodeForm.endCode,(e=>{e.then((()=>{this.loading=!1}))})):this.$alert("起始编号和终止编号长度必须相同","警告",{confirmButtonText:"确定",callback:()=>{this.loading=!1}})}else this.$alert("起始编号不能为空","警告",{confirmButtonText:"确定",callback:()=>{this.loading=!1,this.$nextTick((()=>{this.$refs["start-code"].focus()}))}})}else this.$alert("起始编号不能为空","警告",{confirmButtonText:"确定",callback:()=>{this.loading=!1}})},handleQuery(){if(this.loading=!0,this.pageCodeForm.startCode){{const e=this.pageCodeForm.startCode+"";if(e.trim().length<1)return void(this.loading=!1);this.pageCodeForm.startCode=e}if(this.pageCodeForm.endCode){{const e=this.pageCodeForm.endCode+"";if(e.trim().length<1)return void(this.loading=!1);this.pageCodeForm.endCode=e}this.pageCodeForm.startCode.length===this.pageCodeForm.endCode.length?this.$emit("handleQuery",this.pageCodeForm.startCode,this.pageCodeForm.endCode,(e=>{e.then((()=>{this.loading=!1}))})):this.loading=!1}else this.loading=!1}else this.loading=!1}}},C=i(89);const k=(0,C.Z)(F,[["render",W]]);var x=k;const I=e=>((0,a.dD)("data-v-7588d96f"),e=e(),(0,a.Cn)(),e),S={class:"print-left"},V={class:"print-box"},_=I((()=>(0,a._)("div",{class:"print-title"},"基础组件",-1))),T={class:"print-button-box"},U=(0,a.Uk)("文本"),$=(0,a.Uk)("图片"),j={class:"print-box"},z=I((()=>(0,a._)("div",{class:"print-title"},"特殊组件",-1))),P={class:"print-button-box"},H=(0,a.Uk)("个人组织"),L=(0,a.Uk)("个人姓名"),B=(0,a.Uk)("个人编号"),N=(0,a.Uk)("个人头像"),M=(0,a.Uk)("条码");function G(e,t,i,l,o,n){const d=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)("div",S,[(0,a._)("div",V,[_,(0,a._)("div",T,[(0,a.Wm)(d,{disabled:i.disabled||o.loading,type:"primary",size:"default",onClick:n.handleCreateText},{default:(0,a.w5)((()=>[U])),_:1},8,["disabled","onClick"]),(0,a.Wm)(d,{disabled:i.disabled||o.loading,type:"primary",size:"default",onClick:n.handleCreateImg},{default:(0,a.w5)((()=>[$])),_:1},8,["disabled","onClick"])])]),(0,a._)("div",j,[z,(0,a._)("div",P,[(0,a.Wm)(d,{disabled:i.disabled||o.loading,type:"primary",size:"default",onClick:n.handleCreateDept},{default:(0,a.w5)((()=>[H])),_:1},8,["disabled","onClick"]),(0,a.Wm)(d,{disabled:i.disabled||o.loading,type:"primary",size:"default",onClick:n.handleCreateName},{default:(0,a.w5)((()=>[L])),_:1},8,["disabled","onClick"]),(0,a.Wm)(d,{disabled:i.disabled||o.loading,type:"primary",size:"default",onClick:n.handleCreateCode},{default:(0,a.w5)((()=>[B])),_:1},8,["disabled","onClick"]),(0,a.Wm)(d,{disabled:i.disabled||o.loading,type:"primary",size:"default",onClick:n.handleCreatePhoto},{default:(0,a.w5)((()=>[N])),_:1},8,["disabled","onClick"]),(0,a.Wm)(d,{disabled:i.disabled||o.loading,type:"primary",size:"default",onClick:n.handleCreateBarcode},{default:(0,a.w5)((()=>[M])),_:1},8,["disabled","onClick"])])])])}var O={methods:{generateId(){const e=this.pageItems.map((e=>e.id)).sort(((e,t)=>e.id-t.id));for(let t=0;t<=e[this.pageItems.length-1]+1;t++)if(-1===e.indexOf(t))return t}}},R={mixins:[O],props:{disabled:{type:Boolean,default:!1},items:{type:Array,default:null}},data(){return{loading:!1}},computed:{pageItems:{get(){return this.items},set(e){this.$emit("update:items",e)}}},methods:{handleCreateText(){this.loading=!0;let e="文本",t=this.pageItems.find((t=>t.name===e));if(t){let i=0;while(t)++i,t=this.pageItems.find((t=>t.name===e+i));e+=i}t={name:e,type:1,prefix:"",value:"文本",isSelect:!1,left:0,top:0,fontSize:16,fontWeight:"normal",fontFamily:"Microsoft JhengHei"},t.id=this.generateId(),this.pageItems.push(t),this.loading=!1},handleCreateImg(){this.loading=!0;let e="图片",t=this.pageItems.find((t=>t.name===e));if(t){let i=0;while(t)++i,t=this.pageItems.find((t=>t.name===e+i));e+=i}t={name:e,type:2,prefix:"",value:"",isSelect:!1,left:0,top:0,width:20,height:20,borderWidth:1,borderStyle:"solid",borderColor:"#000",margin:0},t.id=this.generateId(),this.pageItems.push(t),this.loading=!1},handleCreateBarcode(){this.loading=!0;let e="条码",t=this.pageItems.find((t=>t.name===e));if(t){let i=0;while(t)++i,t=this.pageItems.find((t=>t.name===e+i));e+=i}t={name:e,type:3,value:"test",isSelect:!1,left:0,top:0,height:10,width:30},t.id=this.generateId(),this.pageItems.push(t),this.loading=!1},handleCreateDept(){this.loading=!0;let e="个人组织",t=this.pageItems.find((t=>t.name===e));if(t){let i=0;while(t)++i,t=this.pageItems.find((t=>t.name===e+i));e+=i}t={name:e,type:1,field:1,prefix:"",isSelect:!1,left:0,top:0,fontSize:16,fontWeight:"normal",fontFamily:"Microsoft JhengHei"},t.id=this.generateId(),this.pageItems.push(t),this.loading=!1},handleCreateName(){this.loading=!0;let e="个人姓名",t=this.pageItems.find((t=>t.name===e));if(t){let i=0;while(t)++i,t=this.pageItems.find((t=>t.name===e+i));e+=i}t={name:e,type:1,field:2,prefix:"姓名：",isSelect:!1,left:0,top:0,fontSize:16,fontWeight:"normal",fontFamily:"Microsoft JhengHei"},t.id=this.generateId(),this.pageItems.push(t),this.loading=!1},handleCreateCode(){this.loading=!0;let e="个人编号",t=this.pageItems.find((t=>t.name===e));if(t){let i=0;while(t)++i,t=this.pageItems.find((t=>t.name===e+i));e+=i}t={name:e,type:1,field:3,prefix:"证号：",isSelect:!1,left:0,top:0,fontSize:16,fontWeight:"normal",fontFamily:"Microsoft JhengHei"},t.id=this.generateId(),this.pageItems.push(t),this.loading=!1},handleCreatePhoto(){this.loading=!0;let e="个人头像",t=this.pageItems.find((t=>t.name===e));if(t){let i=0;while(t)++i,t=this.pageItems.find((t=>t.name===e+i));e+=i}t={name:e,type:2,field:1,isSelect:!1,left:0,top:0,width:25,height:35,borderWidth:1,borderStyle:"solid",borderColor:"#000",margin:0},t.id=this.generateId(),this.pageItems.push(t),this.loading=!1}}};const D=(0,C.Z)(R,[["render",G],["__scopeId","data-v-7588d96f"]]);var q=D;const A={style:{"text-align":"center","margin-bottom":"10px"}},E=(0,a.Uk)("保 存"),J=(0,a.Uk)("删 除");function K(e,t,i,l,o,n){const d=(0,a.up)("el-input"),m=(0,a.up)("el-form-item"),r=(0,a.up)("el-option"),s=(0,a.up)("el-select"),u=(0,a.up)("img-upload"),h=(0,a.up)("el-checkbox"),p=(0,a.up)("el-button"),g=(0,a.up)("el-form");return(0,a.wg)(),(0,a.j4)(g,{inline:"","label-width":"120px",disabled:o.loading},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{label:"组件名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{ref:"name",modelValue:o.item.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.item.name=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m,{label:"X"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:o.item.left,"onUpdate:modelValue":t[1]||(t[1]=e=>o.item.left=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m,{label:"Y"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:o.item.top,"onUpdate:modelValue":t[2]||(t[2]=e=>o.item.top=e)},null,8,["modelValue"])])),_:1}),1===o.item.type?((0,a.wg)(),(0,a.j4)(m,{key:"prefix",label:"前缀"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:o.item.prefix,"onUpdate:modelValue":t[3]||(t[3]=e=>o.item.prefix=e)},null,8,["modelValue"])])),_:1})):(0,a.kq)("",!0),1!==o.item.type||o.item.field?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(m,{key:"item-value",label:"文本"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:o.item.value,"onUpdate:modelValue":t[4]||(t[4]=e=>o.item.value=e)},null,8,["modelValue"])])),_:1})),1===o.item.type?((0,a.wg)(),(0,a.j4)(m,{key:"font-family",label:"字体类型"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:o.item.fontFamily,"onUpdate:modelValue":t[5]||(t[5]=e=>o.item.fontFamily=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"微软雅黑",value:"Microsoft JhengHei"}),(0,a.Wm)(r,{label:"宋体",value:"SimSun"}),(0,a.Wm)(r,{label:"黑体",value:"SimHei"}),(0,a.Wm)(r,{label:"楷体",value:"KaiTi"}),(0,a.Wm)(r,{label:"serif",value:"serif"}),(0,a.Wm)(r,{label:"sans-serif",value:"sans-serif"}),(0,a.Wm)(r,{label:"monospace",value:"monospace"})])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),1===o.item.type?((0,a.wg)(),(0,a.j4)(m,{key:"font-size",label:"字体大小"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:o.item.fontSize,"onUpdate:modelValue":t[6]||(t[6]=e=>o.item.fontSize=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.fontSize,(e=>((0,a.wg)(),(0,a.j4)(r,{key:"fontSize"+e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),1===o.item.type?((0,a.wg)(),(0,a.j4)(m,{key:"font-weight",label:"字体粗细"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:o.item.fontWeight,"onUpdate:modelValue":t[7]||(t[7]=e=>o.item.fontWeight=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"正常",value:"normal"}),(0,a.Wm)(r,{label:"加粗",value:"bold"})])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),2===o.item.type?((0,a.wg)(),(0,a.j4)(m,{key:"img-height",label:"高度(mm)"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:o.item.height,"onUpdate:modelValue":t[8]||(t[8]=e=>o.item.height=e)},null,8,["modelValue"])])),_:1})):(0,a.kq)("",!0),2===o.item.type?((0,a.wg)(),(0,a.j4)(m,{key:"img-width",label:"宽度(mm)"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:o.item.width,"onUpdate:modelValue":t[9]||(t[9]=e=>o.item.width=e)},null,8,["modelValue"])])),_:1})):(0,a.kq)("",!0),2===o.item.type&&1!==o.item.field?((0,a.wg)(),(0,a.j4)(m,{key:"img-upload",label:"上传图片"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{onSetImg:n.setImg,onGetImgRef:n.getImgRef},null,8,["onSetImg","onGetImgRef"])])),_:1})):(0,a.kq)("",!0),3===o.item.type?((0,a.wg)(),(0,a.j4)(m,{key:"barcode-text",label:"文本"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:o.item.value,"onUpdate:modelValue":t[10]||(t[10]=e=>o.item.value=e)},null,8,["modelValue"])])),_:1})):(0,a.kq)("",!0),3===o.item.type?((0,a.wg)(),(0,a.j4)(m,{key:"barcode-height",label:"条码高度(mm)"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:o.item.height,"onUpdate:modelValue":t[11]||(t[11]=e=>o.item.height=e)},null,8,["modelValue"])])),_:1})):(0,a.kq)("",!0),3===o.item.type?((0,a.wg)(),(0,a.j4)(m,{key:"barcode-width",label:"条码宽度(mm)"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:o.item.width,"onUpdate:modelValue":t[12]||(t[12]=e=>o.item.width=e)},null,8,["modelValue"])])),_:1})):(0,a.kq)("",!0),3===o.item.type?((0,a.wg)(),(0,a.j4)(m,{key:"with-name",label:"显示姓名",style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{modelValue:o.item.withName,"onUpdate:modelValue":t[13]||(t[13]=e=>o.item.withName=e),onChange:n.changeWithName},null,8,["modelValue","onChange"])])),_:1})):(0,a.kq)("",!0),3===o.item.type&&o.item.withName?((0,a.wg)(),(0,a.j4)(m,{key:"name-text-align",label:"姓名对齐方式"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:o.item.nameTextAlign,"onUpdate:modelValue":t[14]||(t[14]=e=>o.item.nameTextAlign=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"左",value:"left"}),(0,a.Wm)(r,{label:"中",value:"center"}),(0,a.Wm)(r,{label:"右",value:"right"})])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),3===o.item.type&&o.item.withName?((0,a.wg)(),(0,a.j4)(m,{key:"name-font-family",label:"姓名字体类型"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:o.item.nameFontFamily,"onUpdate:modelValue":t[15]||(t[15]=e=>o.item.nameFontFamily=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"微软雅黑",value:"Microsoft JhengHei"}),(0,a.Wm)(r,{label:"宋体",value:"SimSun"}),(0,a.Wm)(r,{label:"黑体",value:"SimHei"}),(0,a.Wm)(r,{label:"楷体",value:"KaiTi"}),(0,a.Wm)(r,{label:"serif",value:"serif"}),(0,a.Wm)(r,{label:"sans-serif",value:"sans-serif"}),(0,a.Wm)(r,{label:"monospace",value:"monospace"})])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),3===o.item.type&&o.item.withName?((0,a.wg)(),(0,a.j4)(m,{key:"name-font-size",label:"姓名字体大小"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:o.item.nameFontSize,"onUpdate:modelValue":t[16]||(t[16]=e=>o.item.nameFontSize=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.fontSize,(e=>((0,a.wg)(),(0,a.j4)(r,{key:"fontSize"+e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),3===o.item.type&&o.item.withName?((0,a.wg)(),(0,a.j4)(m,{key:"name-font-weight",label:"姓名字体粗细"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:o.item.nameFontWeight,"onUpdate:modelValue":t[17]||(t[17]=e=>o.item.nameFontWeight=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"正常",value:"normal"}),(0,a.Wm)(r,{label:"加粗",value:"bold"})])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),3===o.item.type?((0,a.wg)(),(0,a.j4)(m,{key:"with-barcode",label:"显示条码文本",style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{modelValue:o.item.withCode,"onUpdate:modelValue":t[18]||(t[18]=e=>o.item.withCode=e),onChange:n.changeWithCode},null,8,["modelValue","onChange"])])),_:1})):(0,a.kq)("",!0),3===o.item.type&&o.item.withCode?((0,a.wg)(),(0,a.j4)(m,{key:"barcode-text-align",label:"条码对其方式"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:o.item.barcodeTextAlign,"onUpdate:modelValue":t[19]||(t[19]=e=>o.item.barcodeTextAlign=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"左",value:"left"}),(0,a.Wm)(r,{label:"中",value:"center"}),(0,a.Wm)(r,{label:"右",value:"right"})])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),3===o.item.type&&o.item.withCode?((0,a.wg)(),(0,a.j4)(m,{key:"barcode-font-family",label:"条码字体类型"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:o.item.barcodeFontFamily,"onUpdate:modelValue":t[20]||(t[20]=e=>o.item.barcodeFontFamily=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"微软雅黑",value:"Microsoft JhengHei"}),(0,a.Wm)(r,{label:"宋体",value:"SimSun"}),(0,a.Wm)(r,{label:"黑体",value:"SimHei"}),(0,a.Wm)(r,{label:"楷体",value:"KaiTi"}),(0,a.Wm)(r,{label:"serif",value:"serif"}),(0,a.Wm)(r,{label:"sans-serif",value:"sans-serif"}),(0,a.Wm)(r,{label:"monospace",value:"monospace"})])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),3===o.item.type&&o.item.withCode?((0,a.wg)(),(0,a.j4)(m,{key:"barcode-font-size",label:"条码字体大小"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:o.item.barcodeFontSize,"onUpdate:modelValue":t[21]||(t[21]=e=>o.item.barcodeFontSize=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.fontSize,(e=>((0,a.wg)(),(0,a.j4)(r,{key:"fontSize"+e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),3===o.item.type&&o.item.withCode?((0,a.wg)(),(0,a.j4)(m,{key:"barcode-font-weight",label:"条码字体粗细"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:o.item.barcodeFontWeight,"onUpdate:modelValue":t[22]||(t[22]=e=>o.item.barcodeFontWeight=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"正常",value:"normal"}),(0,a.Wm)(r,{label:"加粗",value:"bold"})])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),(0,a._)("div",A,[(0,a.Wm)(p,{type:"primary",onClick:n.submitForm},{default:(0,a.w5)((()=>[E])),_:1},8,["onClick"]),(0,a.Wm)(p,{type:"danger",onClick:n.removeItem},{default:(0,a.w5)((()=>[J])),_:1},8,["onClick"])])])),_:1},8,["disabled"])}const Q={class:"img-box"},Z=(0,a.Uk)("上传");function Y(e,t,i,l,o,n){const d=(0,a.up)("el-button"),m=(0,a.up)("el-upload"),r=(0,a.up)("photo-cropper");return(0,a.wg)(),(0,a.iD)("div",Q,[(0,a.Wm)(m,{action:"",limit:1,"file-list":o.fileList,"auto-upload":!1,"show-file-list":!1,accept:"image/*","on-change":n.handleChangeFile},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{type:"primary"},{default:(0,a.w5)((()=>[Z])),_:1})])),_:1},8,["file-list","on-change"]),(0,a.Wm)(r,{visible:o.openCropper,"onUpdate:visible":t[0]||(t[0]=e=>o.openCropper=e),target:o.imgBase64,"onUpdate:target":t[1]||(t[1]=e=>o.imgBase64=e),temp:o.tempImgBase64,height:o.height,width:o.width},null,8,["visible","target","temp","height","width"])])}i(2801),i(8675),i(3462),i(1703);function X(e){return new Promise((t=>{const i=new FileReader;i.onload=()=>{t(i.result)},i.readAsDataURL(e)}))}function ee(e,t=!1){if(!e&&"object"!==typeof e)throw new Error("error arguments");const i=e.constructor===Array?[]:{};return Object.keys(e).forEach((l=>{const o=e[l];if(o&&"object"===typeof o)i[l]=ee(o);else{if(t&&null==o)return;i[l]=o}})),i}const te=e=>((0,a.dD)("data-v-69f8b8d6"),e=e(),(0,a.Cn)(),e),ie=te((()=>(0,a._)("p",{style:{"text-align":"center","font-size":"16px","font-weight":"bold"}},"预览",-1))),le={style:{"text-align":"center"}},oe=(0,a.Uk)("确定 ");function ae(e,t,i,l,o,n){const m=(0,a.up)("vue-cropper"),r=(0,a.up)("el-col"),s=(0,a.up)("el-button"),u=(0,a.up)("el-row"),h=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(h,{title:"图片裁剪",modelValue:n.open,"onUpdate:modelValue":t[0]||(t[0]=e=>n.open=e),"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,onOpen:n.openFunc,onOpened:n.openedFunc,onClose:n.closeFunc},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{span:24,sm:12},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{ref:"cropper","aspect-ratio":i.width/i.height,"min-container-width":200,"min-container-height":200,src:o.originBase64,preview:".preview"},null,8,["aspect-ratio","src"])])),_:1}),(0,a.Wm)(r,{span:24,sm:{span:10,offset:2}},{default:(0,a.w5)((()=>[ie,(0,a._)("div",{class:"preview",style:(0,d.j5)(n.previewStyle)},null,4),(0,a._)("div",le,[(0,a.Wm)(s,{type:"primary",plain:"",onClick:n.handleClick},{default:(0,a.w5)((()=>[oe])),_:1},8,["onClick"])])])),_:1})])),_:1})])),_:1},8,["modelValue","onOpen","onOpened","onClose"])}var ne=i(6260),de={components:{VueCropper:ne.Z},props:{visible:{type:Boolean,default:!0},target:{type:String,default:null},temp:{type:String,default:null},height:{type:Number,default:null},width:{type:Number,default:null}},data(){return{originBase64:null}},computed:{open:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},targetBase64:{get(){return this.target},set(e){this.$emit("update:target",e)}},previewStyle(){return{width:this.width+"px",height:this.height+"px"}}},methods:{openFunc(){this.originBase64=this.temp},openedFunc(){this.$refs.cropper.replace(this.originBase64)},closeFunc(){this.$refs.cropper.reset()},handleClick(){this.targetBase64=this.$refs.cropper.getCroppedCanvas({width:this.width,height:this.height}).toDataURL(),this.open=!1}}};const me=(0,C.Z)(de,[["render",ae],["__scopeId","data-v-69f8b8d6"]]);var re=me,se={components:{PhotoCropper:re},data(){return{fileList:[],imgBase64:null,tempImgBase64:null,openCropper:!1,height:null,width:null}},watch:{imgBase64:{handler(e){this.$emit("setImg",e)}}},methods:{handleChangeFile(e){this.loading||(this.loading=!0,X(e.raw).then((e=>{this.$emit("getImgRef",(t=>{this.height=t.clientHeight,this.width=t.clientWidth,this.tempImgBase64=e,this.openCropper=!0,this.loading=!1}))})).catch((()=>{})).finally((()=>{this.loading=!1,this.fileList=[]})))}}};const ue=(0,C.Z)(se,[["render",Y],["__scopeId","data-v-3fe9ef4f"]]);var he=ue,pe={components:{ImgUpload:he},props:{items:{type:Array,default:null},currentIndex:{type:Number,default:null}},data(){return{loading:!1,item:{}}},computed:{fontSize(){const e=[];for(let t=10;t<=32;t++)e.push(t);return e}},watch:{currentIndex:{handler(e){if(null!=e){const t=this.items[e];this.item=t}}}},methods:{changeWithName(e){e&&(this.item.nameFontFamily="Microsoft JhengHei",this.item.nameFontSize="16",this.item.nameFontWeight="normal",this.item.nameTextAlign="left")},changeWithCode(e){e&&(this.item.barcodeFontFamily="Microsoft JhengHei",this.item.barcodeFontSize="16",this.item.barcodeFontWeight="normal",this.item.barcodeTextAlign="left")},setImg(e){this.item.value=e},getImgRef(e){this.$emit("getImgRef",(t=>{e(t)}))},removeItem(){this.$emit("removeItem")},submitForm(){if(this.loading=!0,null==this.item.name||""===this.item.name)return this.$alert("组件名称不能为空","警告",{confirmButtonText:"确定",callback:()=>{this.$nextTick((()=>{this.$refs.name.focus()}))}}),void(this.loading=!1);this.$emit("submitForm",(e=>{e.then((()=>{this.loading=!1}))}))}}};const ge=(0,C.Z)(pe,[["render",K]]);var fe=ge,ce=i(8504),be={name:"VueBarcode",props:{value:[String,Number],format:[String],width:[String,Number],height:[String,Number],displayValue:{type:[String,Boolean],default:!0},text:[String,Number],fontOptions:[String],font:[String],textAlign:[String],textPosition:[String],textMargin:[String,Number],fontSize:[String,Number],background:[String],lineColor:[String],margin:[String,Number],marginTop:[String,Number],marginBottom:[String,Number],marginLeft:[String,Number],marginRight:[String,Number],flat:[Boolean],ean128:[String,Boolean],elementTag:{type:String,default:"svg",validator:e=>-1!==["canvas","svg","img"].indexOf(e)}},mounted(){this.init()},methods:{init(){const{value:e,...t}=this.$props,i=ee(t,!0);ce(this.$el.querySelector(".vue-barcode-element"),String(e),i)}},setup(e){(0,a.YP)(e,(()=>{this.$el&&this.init()}))},render(){return(0,a.h)("div",[(0,a.h)(this.elementTag,{class:["vue-barcode-element"]}),(0,a.h)("div",{},this.$slots.default)])}};const we=be;var ye=we,ve={props:{globeForm:{type:Object,default:null},items:{type:Array,default:null}},data(){return{printType:1,printInfos:[]}},computed:{pageGlobeForm:{get(){return this.globeForm},set(e){this.$emit("update:globeForm",e)}},pageItems:{get(){return this.items},set(e){this.$emit("update:items",e)}}},mounted(){window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("keydown",this.handlePreventDefault)},unmounted(){window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("keydown",this.handlePreventDefault)},methods:{checkFocus(){const e=document.querySelector(".print-el-scrollbar");return e===document.activeElement||e.contains(document.activeElement)},handleMove(e,t,i){const l=this.pageItems,o=l.findIndex((e=>e.id===i)),a=l.findIndex((e=>e.isSelect));a>-1&&(this.pageItems[a].isSelect=!1),this.pageItems[o].isSelect=!0,this.$emit("setCurrentRow",o);const n=this.$refs[t+i],d=e.clientX-n.offsetLeft,m=e.clientY-n.offsetTop;document.onmousemove=e=>{const t=e.clientX-d,i=e.clientY-m,l=n.parentElement;if(t>-1&&t+n.clientWidth<=l.clientWidth&&i>-1&&i+n.clientHeight<=l.clientHeight){const e=this.pageItems[o];e.left=t,e.top=i,this.pageItems[o].left=e.left,this.pageItems[o].top=e.top}},document.ondragstart=e=>{e.preventDefault()},document.ondragend=e=>{e.preventDefault()},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}},handleQuery(e,t){return new Promise((e=>{const t=[];for(let i=1;i<32;i++)t.push({code:"0000"+i,name:"张三"+i,photo:null,deptName:"开发部"});this.printInfos=t,this.$emit("setCodeLength",this.printInfos.length),e()}))},dealPrintInfo(e){const t=e*this.pageGlobeForm.rows*this.pageGlobeForm.columns,i=(e+1)*this.pageGlobeForm.rows*this.pageGlobeForm.columns;return this.printInfos.slice(t,i)},handlePreventDefault(e){const t=this.pageItems.findIndex((e=>e.isSelect));t>-1&&this.checkFocus()&&e.preventDefault()},handleKeyUp(e){const t=this.pageItems.findIndex((e=>e.isSelect));if(t>-1&&this.checkFocus()){const i=this.pageItems[t];let l,o;switch(e.code){case"ArrowLeft":l=i.left-1,this.pageItems[t].left=l;break;case"ArrowUp":o=i.top-1,this.pageItems[t].top=o;break;case"ArrowRight":l=i.left+1,this.pageItems[t].left=l;break;case"ArrowDown":o=i.top+1,this.pageItems[t].top=o;break;case"Backspace":this.pageItems.splice(t,1);break;case"Delete":this.pageItems.splice(t,1);break}}}},render(){const e=[];let t;t=null==this.pageGlobeForm.rows||""===this.pageGlobeForm.rows||0===this.pageGlobeForm.rows||null==this.pageGlobeForm.columns||""===this.pageGlobeForm.columns||0===this.pageGlobeForm.columns||0===this.printInfos.length?0:Math.ceil(this.printInfos.length/(this.pageGlobeForm.rows*this.pageGlobeForm.columns));for(let i=0;i<t;i++){const t=[];let l=[];const o=this.dealPrintInfo(i);for(let e=0;e<o.length;e++){const n=o[e],d=[];for(const t of this.pageItems){let l,o,m;const r={style:{left:t.left+"px",top:t.top+"px"}};switch(t.type){case 1:switch(r.style.fontSize=t.fontSize+"px",r.style.fontWeight=t.fontWeight,r.style.fontFamily=t.fontFamily,o={},m=[],t.prefix&&m.push((0,a.h)("span",{style:{whiteSpace:"pre"},innerText:t.prefix})),t.field){case 1:o.innerText=n.deptName;break;case 2:o.innerText=n.name;break;case 3:o.innerText=n.code;break;default:o.innerText=t.value;break}m.push((0,a.h)("span",o)),l=m;break;case 2:r.style.width=t.width+"mm",r.style.height=t.height+"mm",r.style.borderWidth=t.borderWidth+"px",r.style.borderStyle="solid",r.style.borderColor="#000",r.style.margin=0,o={style:{width:"100%",height:"100%"}},1===t.field?o.src=n.photo:o.src=t.value||null,l=(0,a.h)("img",o);break;case 3:m=[],t.withName&&m.push((0,a.h)("div",{style:{textAlign:t.nameTextAlign,fontSize:t.nameFontSize+"px",fontWeight:t.nameFontWeight,fontFamily:t.nameFontFamily},innerText:n.name})),o={background:"transparent",displayValue:!1,margin:0,width:"1",elementTag:"img",style:{height:t.height+"mm",width:t.width+"mm"}},1===t.field?o.value=n.code:o.value=t.value,m.push((0,a.h)(ye,o)),t.withCode&&m.push((0,a.h)("div",{style:{textAlign:t.barcodeTextAlign,fontSize:t.barcodeFontSize+"px",fontWeight:t.barcodeFontWeight,fontFamily:t.barcodeFontFamily},innerText:n.code})),l=(0,a.h)("div",null,m);break}if(0===i&&0===e){r.ref=t.name+t.id;const e=["edit-item"];t.isSelect&&e.push("is-select"),r.class=e,r.tabindex="-1",r.onMousedown=e=>{e.stopPropagation(),0===e.button&&this.handleMove(e,t.name,t.id)}}let s;l&&(s=Array.isArray(l)?l:[l]),d.push((0,a.h)("div",r,s))}const m={style:{height:this.pageGlobeForm.height+"mm",width:this.pageGlobeForm.width+"mm",borderWidth:this.pageGlobeForm.borderWidth+"px",borderColor:"#000",marginTop:this.pageGlobeForm.marginTop+"mm",marginLeft:this.pageGlobeForm.marginLeft+"mm"}},r=["print-card"];0===i&&0===e?r.push("edit-card"):r.push("disabled-card"),m.class=r,l.push((0,a.h)("div",m,d)),l.length===parseInt(this.pageGlobeForm.columns)&&(t.push((0,a.h)("div",{class:"print-row"},l)),l=[])}l.length>0&&t.push((0,a.h)("div",{class:"print-row"},l)),t.push((0,a.h)("div",{class:"no-print page-break"})),e.push((0,a.h)("div",{class:"print-page",style:{height:this.pageGlobeForm.pageHeight+"mm",width:this.pageGlobeForm.pageWidth+"mm",paddingTop:this.pageGlobeForm.pagePaddingTop+"mm",paddingLeft:this.pageGlobeForm.pagePaddingLeft+"mm"}},t))}return(0,a.h)("div",{id:"print-main"},e)}};const We=ve;var Fe=We,Ce={name:"PrintPage",components:{InfoExtract:x,ItemSelect:q,ItemInfo:fe,PrintMain:Fe},data(){return{loading:!1,cos:null,rightTabs:"extract",currentIndex:null,items:[{name:"个人组织",id:0,type:1,field:1,prefix:"组织：",isSelect:!1,left:150,top:95,fontSize:16,fontWeight:"normal",fontFamily:"Microsoft JhengHei"},{name:"个人姓名",id:1,type:1,field:2,prefix:"姓名：",isSelect:!1,left:150,top:55,fontSize:16,fontWeight:"normal",fontFamily:"Microsoft JhengHei"},{name:"个人证号",id:2,type:1,field:3,prefix:"证号：",isSelect:!1,left:150,top:75,fontSize:16,fontWeight:"normal",fontFamily:"Microsoft JhengHei"},{name:"个人头像",id:3,type:2,field:1,isSelect:!1,left:30,top:30,width:25,height:35,borderWidth:1,borderStyle:"solid",borderColor:"#000",margin:0},{name:"个人条码",id:4,type:3,field:1,isSelect:!1,left:150,top:115,height:10,width:30}],globeForm:{pageHeight:297,pageWidth:210,pagePaddingTop:0,pagePaddingLeft:0,rows:5,columns:2,height:52,width:86,marginTop:0,marginLeft:0,borderWidth:1},codeForm:{startCode:"00001",endCode:"00031"},codeLength:0}},computed:{borderWidth(){const e=[];for(let t=0;t<=6;t++)e.push(t);return e}},created(){this.initCos(),this.resetForm()},mounted(){const e=document.getElementsByTagName("head")[0],t=e.getElementsByTagName("style"),i=e.getElementsByTagName("link"),l=document.getElementById("print-iframe").contentWindow;let o="";for(const a of t)o+=a.outerHTML;for(const a of i)"stylesheet"===a.rel&&(o+=a.outerHTML);l.document.head.innerHTML=o},methods:{initCos(){},setForm(e){const t=e.data.data;if(t&&t.defaultJson){const e=JSON.parse(t.defaultJson);this.items=e.items,this.globeForm=e.globeForm,this.codeForm=e.codeForm}else this.resetForm()},uploadPicture(){return new Promise(((e,t)=>{e()}))},submitForm(){return new Promise((e=>{this.loading=!0;const t=this.items.filter((e=>null==e.name||""===e.name));t.length>0&&(this.$alert("有组件名称为空","警告",{confirmButtonText:"确定",callback:()=>{"component"!==this.rightTabs&&(this.rightTabs="component"),this.currentIndex=this.items.findIndex((e=>e.id===t[0].id)),this.$nextTick((()=>{this.$refs["item-info"].$refs["name"].focus()}))}}),this.loading=!1),this.uploadPicture().then((()=>{const e={items:this.items.map((e=>(delete e.isSelect,e))),globeForm:this.globeForm,codeForm:this.codeForm};JSON.stringify(e)})).catch((()=>{})).finally((()=>{this.loading=!1,e()}))}))},submitItemForm(e){e(this.submitForm())},handlePrint(){const e=this.$refs["print-main"];if(e.printInfos.length<1)return void this.$message.error("没有需要打印的内容");const t=this.items.findIndex((e=>e.isSelect));t>-1&&(this.items[t].isSelect=!1),this.$nextTick((()=>{const t=document.getElementById("print-iframe").contentWindow;t.document.body.innerHTML=e.$el.outerHTML,t.print()}))},handleQuery(e,t,i){i(this.$refs["print-main"].handleQuery(e,t))},resetItemInfo(){this.rightTabs="globe",this.$refs["items-table"].setCurrentRow(),this.currentIndex=null},setCodeLength(e){this.codeLength=e},setCurrentRow(e){null!=e?(this.$refs["items-table"].setCurrentRow(this.items[e]),"component"!==this.rightTabs&&(this.rightTabs="component"),this.currentIndex=e):this.resetItemInfo()},handleCurrentChange(e){if(e){const t=this.items.findIndex((e=>e.isSelect));t>-1&&(this.items[t].isSelect=!1);const i=this.items.findIndex((t=>t===e));e.isSelect=!0,"component"!==this.rightTabs&&(this.rightTabs="component"),this.currentIndex=i}else this.resetItemInfo()},dealType(e,t,i){switch(i){case 1:return"文本";case 2:return"图片";case 3:return"条码";default:return""}},resetForm(){this.globeForm={pageHeight:297,pageWidth:210,pagePaddingTop:0,pagePaddingLeft:0,rows:5,columns:2,height:52,width:86,marginTop:0,marginLeft:0,borderWidth:1},this.items=[{name:"个人组织",id:0,type:1,field:1,prefix:"组织：",isSelect:!1,left:150,top:95,fontSize:16,fontWeight:"normal",fontFamily:"Microsoft JhengHei"},{name:"个人姓名",id:1,type:1,field:2,prefix:"姓名：",isSelect:!1,left:150,top:55,fontSize:16,fontWeight:"normal",fontFamily:"Microsoft JhengHei"},{name:"个人证号",id:2,type:1,field:3,prefix:"证号：",isSelect:!1,left:150,top:75,fontSize:16,fontWeight:"normal",fontFamily:"Microsoft JhengHei"},{name:"个人头像",id:3,type:2,field:1,isSelect:!1,left:30,top:30,width:25,height:35,borderWidth:1,borderStyle:"solid",borderColor:"#000",margin:0},{name:"个人条码",id:4,type:3,field:1,isSelect:!1,left:150,top:115,height:10,width:30}]},removeItem(){this.items.splice(this.currentIndex,1)},getImgRef(e){const t=this.items.find((e=>e.isSelect));e(this.$refs["print-main"].$refs[t.name+t.id])}}};const ke=(0,C.Z)(Ce,[["render",w],["__scopeId","data-v-4e3062a4"]]);var xe=ke,Ie={name:"App",components:{PrintPage:xe}};const Se=(0,C.Z)(Ie,[["render",n]]);var Ve=Se;const _e=(0,l.ri)(Ve);_e.use(o.Z),_e.mount("#app")}},t={};function i(l){var o=t[l];if(void 0!==o)return o.exports;var a=t[l]={exports:{}};return e[l].call(a.exports,a,a.exports,i),a.exports}i.m=e,function(){var e=[];i.O=function(t,l,o,a){if(!l){var n=1/0;for(s=0;s<e.length;s++){l=e[s][0],o=e[s][1],a=e[s][2];for(var d=!0,m=0;m<l.length;m++)(!1&a||n>=a)&&Object.keys(i.O).every((function(e){return i.O[e](l[m])}))?l.splice(m--,1):(d=!1,a<n&&(n=a));if(d){e.splice(s--,1);var r=o();void 0!==r&&(t=r)}}return t}a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[l,o,a]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var l in t)i.o(t,l)&&!i.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,l){var o,a,n=l[0],d=l[1],m=l[2],r=0;if(n.some((function(t){return 0!==e[t]}))){for(o in d)i.o(d,o)&&(i.m[o]=d[o]);if(m)var s=m(i)}for(t&&t(l);r<n.length;r++)a=n[r],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(s)},l=self["webpackChunkvue_print_template"]=self["webpackChunkvue_print_template"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=i.O(void 0,[998],(function(){return i(2529)}));l=i.O(l)})();